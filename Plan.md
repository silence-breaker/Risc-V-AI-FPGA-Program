# 为期一年的CPU+NPU计划大纲

## 最终目标

1. 在FPGA上实现一个能够运行C语言程序的基础RISC-V处理器（CPU）
2. 设计一个AI协处理器（NPU），能够加速一个小型神经网络（如手写数字识别）的关键运算
3. 将CPU与NPU集成为一个SoC（片上系统），通过自定义指令集拓展，实现CPU对NPU的控制和数据交换
4. 完成软件（神经网络模型、驱动程序）和硬件的协同验证

## 第一阶段(1-3个月) 编程语言基础学习

1. 巩固C语言基础
2. 学习硬件描述语言Verilog

- 目标：能够使用Verilog描述组合逻辑、时序逻辑

## 第二阶段(4-6个月) 硬件设计与实现（主要时间放在寒假，，任务量较大）

1. 理解C代码到二进制程序的过程
2. 从RTL代码到可流片版图

- 以在仿真层面上实现一个单周期sCPU为目标

## 第三阶段(7-12个月) 流水线CPU实现

1. 把单周期CPU改造成五级流水线CPU

- 目标: 在仿真环境中，CPU能够正确执行一段简单的汇编指令序列

2. 把在仿真软件中验证过的流水线CPU代码加载到FPGA上，使用RISC-V交叉编译工具链，成功在FPGA上运行编译的C语言程序

## 第四阶段(13-15个月) NPU设计与指令集拓展（或许会进行合理分工，具体待定）

1. 解一个简单神经网络（如用于MNIST手写数字识别的MLP或CNN）的原理。重点关注其计算密集型部分，通常是矩阵乘法和激活函数
2. 设计一个可以执行矩阵乘法的硬件模块

- 目标：完成NPU核心计算模块的RTL设计和仿真验证

3. 使用AXI4-Lite（AXI总线青春版）协议实现CPU与NPU之间的通信

- 不要手写AXI代码！ AXI协议非常复杂，手写很容易出错。
- 使用工具生成： 在Vivado/Quartus中，有IP可以帮你自动生成AXI-Lite的从机接口模板。你只需要在这个模板的框架里，添加你自己的逻辑（比如读写NPU的寄存器）即可。
- 先从AXI-Lite开始： 先把CPU通过AXI-Lite控制NPU的通路打通。这是最关键的一步，也是相对容易实现的一步。等这个跑通了，再考虑让NPU自己做主机去访问内存

## 一些建议

1. 前两个阶段依托于一生一芯课程的E阶段来学习
2. 第三个阶段仍未想好依托于什么网上课程或者老师的小项目来学习，待定
3. 第四阶段依托于廖少林老师的FPGA简单神经网络加速硬件小项目来进行学习
